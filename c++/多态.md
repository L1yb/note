多态实现原理


### 编译的过程

1. 预编译
   将头文件中的函数声明拷贝到源文件，避免编译过程中语法分析找不到函数定义
2. 编译
   语法分析，同时进行符号汇总（也就是函数名汇总）
3. 汇编
   生成函数名到函数地址的映射，方面后续通过函数名找到函数定义的位置
4. 链接
   将多个文件中的符号表汇总合并



静态多态和动态多态

- 早绑定：编译期已经确定对象调用的函数的地址

- 包括函数重载
  原理：**函数名修饰**，函数名相同，参数列表不同
  - 返回值不能作为重载的依据
- 包括类模板和函数模板
  - **函数模板**：定义一种通用的函数形式，其中**某些类型是参数化**的，编译器根据调用时实际传入的参数来生成具体的函数版本
  - **类模板**：定义一种通用的类形式，同上





动态多态

- 晚绑定：运行时确定
  - 如果类使用了虚函数，则会生成虚函数表（一个**存放虚函数地址**的**一维数组**），类对象**构造的时候会初始化虚函数表指针**
  - 虚函数表指针在**构造函数中初始化**
- 虚函数重写：在积累的函数前面加上virtual关键字，在派生类重写该函数，**编译器根据调对象的类型来生成具体的函数版本**（书店的书打折扣，计算售价的sales函数
- 



